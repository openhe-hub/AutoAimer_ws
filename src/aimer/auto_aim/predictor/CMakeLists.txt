cmake_minimum_required(VERSION 3.15)

# set(lib_name aimer_auto_aim_predictor)
find_package(OpenCV 4 REQUIRED)
find_package(Eigen3 REQUIRED)
find_package(Ceres REQUIRED)
find_package(Python 3.6 REQUIRED COMPONENTS Development Interpreter)
find_package(pybind11 REQUIRED)
find_package(fmt 3 REQUIRED)

SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -pthread")

include_directories(${OpenCV_INCLUDE_DIRS})
include_directories(${EIGEN3_INCLUDE_DIR})
include_directories(${CERES_INCLUDE_DIRS})
include_directories(${Python_INCLUDE_DIRS})
include_directories(${pybind11_INCLUDE_DIRS})
# 搜集目录中所有源文件，存储到变量中
# aux_source_directory(./aim aim_src)
# aux_source_directory(./enemy enemy_src)
# aux_source_directory(./motion motion_src)
# aux_source_directory(./pnp pnp_src)
# aux_source_directory(./enemy_predictor enemy_predictor_src)
# aux_source_directory(. src)

# 编译变量的源文件并生成对象库 该库完全描述一个线程，不需要被链接
# add_library(${lib_name} OBJECT )


file(GLOB_RECURSE src "./*.hpp" "./*.cpp"  "../../base/*.hpp" "../../base/*.cpp" "../../param/*.hpp" "../../param/*.cpp")
foreach(file ${src})
    message("========================="${file})
endforeach(file)


add_executable(predictor ${src})

target_link_libraries(predictor ${OpenCV_LIBS} ${CERES_LIBRARIES} pthread Python::Python pybind11::pybind11 fmt::fmt)
target_link_libraries(predictor
    ${catkin_LIBRARIES}
)
